set -e
function all {
    local ttPath=/Users/evan.simmons/ck/clif/typethrift
    local idlPath=$ttPath/idl
    for file in $idlPath/*; do
        ./sbt -jvm-debug 5005 "scrooge-generator/run-main com.twitter.scrooge.Main -l node -d ./thrift $file"

        echo "Copying all generated code over"
        cp -rf ./thrift/* $ttPath/src/scrooge
    done
    echo "Removing then generated code locally."
    rm -rf ./thrift/*
}

all "$@"
