/**
 * Generated by Scrooge
 *   version: 4.13.0-SNAPSHOT
 *   rev: 382b53bc01abc74e0182f0c8e1ece5cc55c11355
 *   built at: 20170307-134403
 */
import thrift from 'thrift'
import {Thrift, Q} from 'thrift'

import { ExampleRequest } from './ExampleRequest'
import { ExampleResponse } from './ExampleResponse'
import { ExampleException } from './ExampleException'

class FinagleTestServiceWillSucceedArgs {
        public req: ExampleRequest
    

    constructor(args?) {
        if (args) {
            if (args.req !== undefined && args.req !== null) {
                
                this.req = new ExampleRequest(args.req)
            }
        }
    }

    public read(input) {
        input.readStructBegin("FinagleTestServiceWillSucceedArgs")
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
                case 1:
                    
                                            if (ftype === Thrift.Type.STRUCT) {
                        this.req = new ExampleRequest()
                    
                    } else {
                        input.skip(ftype)
                    }
                    break
                    
                default:
                    input.skip(ftype)
            }
            
            
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceWillSucceedArgs")
        if (this.req !== null && this.req !== undefined) {
            
                        output.writeFieldBegin("req", Thrift.Type.STRUCT, 1)
            this.req.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}


class FinagleTestServiceWillSucceedResult {

    public success: ExampleResponse

    constructor(args?) {
        if (args) {
            if (args.success !== undefined && args.success !== null) {
                this.success = new ExampleResponse(args.success)
            }
        }
    }

    public read(input) {
        input.readStructBegin()
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
            
            case 0:
                input.skip(ftype)
                break
            
            default:
                input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceWillSucceedResult")
        if (this.success !== null && this.success !== undefined) {
            
            output.writeFieldBegin("success", Thrift.Type.STRUCT, 0)
                this.success.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}
class FinagleTestServiceIdlExceptionArgs {
        public req: ExampleRequest
    

    constructor(args?) {
        if (args) {
            if (args.req !== undefined && args.req !== null) {
                
                this.req = new ExampleRequest(args.req)
            }
        }
    }

    public read(input) {
        input.readStructBegin("FinagleTestServiceIdlExceptionArgs")
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
                case 1:
                    
                                            if (ftype === Thrift.Type.STRUCT) {
                        this.req = new ExampleRequest()
                    
                    } else {
                        input.skip(ftype)
                    }
                    break
                    
                default:
                    input.skip(ftype)
            }
            
            
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceIdlExceptionArgs")
        if (this.req !== null && this.req !== undefined) {
            
                        output.writeFieldBegin("req", Thrift.Type.STRUCT, 1)
            this.req.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}


class FinagleTestServiceIdlExceptionResult {

    public success: ExampleResponse

    constructor(args?) {
        if (args) {
            if (args.success !== undefined && args.success !== null) {
                this.success = new ExampleResponse(args.success)
            }
        }
    }

    public read(input) {
        input.readStructBegin()
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
            
            case 0:
                input.skip(ftype)
                break
            
            default:
                input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceIdlExceptionResult")
        if (this.success !== null && this.success !== undefined) {
            
            output.writeFieldBegin("success", Thrift.Type.STRUCT, 0)
                this.success.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}
class FinagleTestServiceAuthExceptionArgs {
        public req: ExampleRequest
    

    constructor(args?) {
        if (args) {
            if (args.req !== undefined && args.req !== null) {
                
                this.req = new ExampleRequest(args.req)
            }
        }
    }

    public read(input) {
        input.readStructBegin("FinagleTestServiceAuthExceptionArgs")
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
                case 1:
                    
                                            if (ftype === Thrift.Type.STRUCT) {
                        this.req = new ExampleRequest()
                    
                    } else {
                        input.skip(ftype)
                    }
                    break
                    
                default:
                    input.skip(ftype)
            }
            
            
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceAuthExceptionArgs")
        if (this.req !== null && this.req !== undefined) {
            
                        output.writeFieldBegin("req", Thrift.Type.STRUCT, 1)
            this.req.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}


class FinagleTestServiceAuthExceptionResult {

    public success: ExampleResponse

    constructor(args?) {
        if (args) {
            if (args.success !== undefined && args.success !== null) {
                this.success = new ExampleResponse(args.success)
            }
        }
    }

    public read(input) {
        input.readStructBegin()
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
            
            case 0:
                input.skip(ftype)
                break
            
            default:
                input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceAuthExceptionResult")
        if (this.success !== null && this.success !== undefined) {
            
            output.writeFieldBegin("success", Thrift.Type.STRUCT, 0)
                this.success.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}
class FinagleTestServiceOtherExceptionArgs {
        public req: ExampleRequest
    

    constructor(args?) {
        if (args) {
            if (args.req !== undefined && args.req !== null) {
                
                this.req = new ExampleRequest(args.req)
            }
        }
    }

    public read(input) {
        input.readStructBegin("FinagleTestServiceOtherExceptionArgs")
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
                case 1:
                    
                                            if (ftype === Thrift.Type.STRUCT) {
                        this.req = new ExampleRequest()
                    
                    } else {
                        input.skip(ftype)
                    }
                    break
                    
                default:
                    input.skip(ftype)
            }
            
            
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceOtherExceptionArgs")
        if (this.req !== null && this.req !== undefined) {
            
                        output.writeFieldBegin("req", Thrift.Type.STRUCT, 1)
            this.req.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}


class FinagleTestServiceOtherExceptionResult {

    public success: ExampleResponse

    constructor(args?) {
        if (args) {
            if (args.success !== undefined && args.success !== null) {
                this.success = new ExampleResponse(args.success)
            }
        }
    }

    public read(input) {
        input.readStructBegin()
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
            
            case 0:
                input.skip(ftype)
                break
            
            default:
                input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceOtherExceptionResult")
        if (this.success !== null && this.success !== undefined) {
            
            output.writeFieldBegin("success", Thrift.Type.STRUCT, 0)
                this.success.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}
class FinagleTestServiceCheckContextArgs {
    

    constructor(args?) {
        if (args) {
            
        }
    }

    public read(input) {
        input.readStructBegin("FinagleTestServiceCheckContextArgs")
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            
            
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceCheckContextArgs")
        
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}


class FinagleTestServiceCheckContextResult {

    public success: string

    constructor(args?) {
        if (args) {
            if (args.success !== undefined && args.success !== null) {
                this.success = args.success
            }
        }
    }

    public read(input) {
        input.readStructBegin()
        while (true) {
            const ret = input.readFieldBegin()
            const fname = ret.fname
            const ftype = ret.ftype
            const fid = ret.fid
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
            
            case 0:
                input.skip(ftype)
                break
            
            default:
                input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output) {
        output.writeStructBegin("FinagleTestServiceCheckContextResult")
        if (this.success !== null && this.success !== undefined) {
            
            output.writeFieldBegin("success", Thrift.Type.STRUCT, 0)
                this.success.write(output)
            
            output.writeFieldEnd()
        }
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}

class FinagleTestServiceClient {
    public output
    public pClass
    private _seqid
    public _reqs

    constructor(output, pClass) {
        this.output = output
        this.pClass = pClass
        this._seqid = 0
        this._reqs = {}
    }

    public seqid() {
        return this._seqid
    }

    public new_seqid() {
        return this._seqid += 1
    }

    public willSucceed(req: ExampleRequest, callback) {
        this._seqid = this.new_seqid()
        if (callback === undefined) {
            let defer = Q.defer()
            this._reqs[this.seqid()] = function(error, result) {
                if (error) {
                    defer.reject(error)
                } else {
                    defer.resolve(result)
                }
            }
            this.send_willSucceed(req, )
            return defer.promise
        } else {
            this._reqs[this.seqid()] = callback
            this.send_willSucceed(req )
        }
    }

    public send_willSucceed(req: ExampleRequest, ) {
        const output = new this.pClass(this.output)
        output.writeMessageBegin("willSucceed", Thrift.MessageType.CALL, this.seqid())
        const args = new FinagleTestServiceWillSucceedArgs()
        args.req = req
        args.write(output)
        output.writeMessageEnd()
        return this.output.flush()
    }

    public recv_willSucceed(input, mtype, rseqid) {
        const noop = () => null
        let callback = this._reqs[rseqid] || noop
        delete this._reqs[rseqid]
        if (mtype === Thrift.MessageType.EXCEPTION) {
            const x = new Thrift.TApplicationException()
            x.read(input)
            input.readMessageEnd()
            return callback(x)
        }
        const result = new FinagleTestServiceWillSucceedResult()
        result.read(input)
        input.readMessageEnd()

        if (null !== result.success) {
            return callback(null, result.success)
        }
        return callback("willSucceed failed: unknown result")
    }
    public idlException(req: ExampleRequest, callback) {
        this._seqid = this.new_seqid()
        if (callback === undefined) {
            let defer = Q.defer()
            this._reqs[this.seqid()] = function(error, result) {
                if (error) {
                    defer.reject(error)
                } else {
                    defer.resolve(result)
                }
            }
            this.send_idlException(req, )
            return defer.promise
        } else {
            this._reqs[this.seqid()] = callback
            this.send_idlException(req )
        }
    }

    public send_idlException(req: ExampleRequest, ) {
        const output = new this.pClass(this.output)
        output.writeMessageBegin("idlException", Thrift.MessageType.CALL, this.seqid())
        const args = new FinagleTestServiceIdlExceptionArgs()
        args.req = req
        args.write(output)
        output.writeMessageEnd()
        return this.output.flush()
    }

    public recv_idlException(input, mtype, rseqid) {
        const noop = () => null
        let callback = this._reqs[rseqid] || noop
        delete this._reqs[rseqid]
        if (mtype === Thrift.MessageType.EXCEPTION) {
            const x = new Thrift.TApplicationException()
            x.read(input)
            input.readMessageEnd()
            return callback(x)
        }
        const result = new FinagleTestServiceIdlExceptionResult()
        result.read(input)
        input.readMessageEnd()

        if (null !== result.success) {
            return callback(null, result.success)
        }
        return callback("idlException failed: unknown result")
    }
    public authException(req: ExampleRequest, callback) {
        this._seqid = this.new_seqid()
        if (callback === undefined) {
            let defer = Q.defer()
            this._reqs[this.seqid()] = function(error, result) {
                if (error) {
                    defer.reject(error)
                } else {
                    defer.resolve(result)
                }
            }
            this.send_authException(req, )
            return defer.promise
        } else {
            this._reqs[this.seqid()] = callback
            this.send_authException(req )
        }
    }

    public send_authException(req: ExampleRequest, ) {
        const output = new this.pClass(this.output)
        output.writeMessageBegin("authException", Thrift.MessageType.CALL, this.seqid())
        const args = new FinagleTestServiceAuthExceptionArgs()
        args.req = req
        args.write(output)
        output.writeMessageEnd()
        return this.output.flush()
    }

    public recv_authException(input, mtype, rseqid) {
        const noop = () => null
        let callback = this._reqs[rseqid] || noop
        delete this._reqs[rseqid]
        if (mtype === Thrift.MessageType.EXCEPTION) {
            const x = new Thrift.TApplicationException()
            x.read(input)
            input.readMessageEnd()
            return callback(x)
        }
        const result = new FinagleTestServiceAuthExceptionResult()
        result.read(input)
        input.readMessageEnd()

        if (null !== result.success) {
            return callback(null, result.success)
        }
        return callback("authException failed: unknown result")
    }
    public otherException(req: ExampleRequest, callback) {
        this._seqid = this.new_seqid()
        if (callback === undefined) {
            let defer = Q.defer()
            this._reqs[this.seqid()] = function(error, result) {
                if (error) {
                    defer.reject(error)
                } else {
                    defer.resolve(result)
                }
            }
            this.send_otherException(req, )
            return defer.promise
        } else {
            this._reqs[this.seqid()] = callback
            this.send_otherException(req )
        }
    }

    public send_otherException(req: ExampleRequest, ) {
        const output = new this.pClass(this.output)
        output.writeMessageBegin("otherException", Thrift.MessageType.CALL, this.seqid())
        const args = new FinagleTestServiceOtherExceptionArgs()
        args.req = req
        args.write(output)
        output.writeMessageEnd()
        return this.output.flush()
    }

    public recv_otherException(input, mtype, rseqid) {
        const noop = () => null
        let callback = this._reqs[rseqid] || noop
        delete this._reqs[rseqid]
        if (mtype === Thrift.MessageType.EXCEPTION) {
            const x = new Thrift.TApplicationException()
            x.read(input)
            input.readMessageEnd()
            return callback(x)
        }
        const result = new FinagleTestServiceOtherExceptionResult()
        result.read(input)
        input.readMessageEnd()

        if (null !== result.success) {
            return callback(null, result.success)
        }
        return callback("otherException failed: unknown result")
    }
    public checkContext(callback) {
        this._seqid = this.new_seqid()
        if (callback === undefined) {
            let defer = Q.defer()
            this._reqs[this.seqid()] = function(error, result) {
                if (error) {
                    defer.reject(error)
                } else {
                    defer.resolve(result)
                }
            }
            this.send_checkContext()
            return defer.promise
        } else {
            this._reqs[this.seqid()] = callback
            this.send_checkContext()
        }
    }

    public send_checkContext() {
        const output = new this.pClass(this.output)
        output.writeMessageBegin("checkContext", Thrift.MessageType.CALL, this.seqid())
        const args = new FinagleTestServiceCheckContextArgs()
        
        args.write(output)
        output.writeMessageEnd()
        return this.output.flush()
    }

    public recv_checkContext(input, mtype, rseqid) {
        const noop = () => null
        let callback = this._reqs[rseqid] || noop
        delete this._reqs[rseqid]
        if (mtype === Thrift.MessageType.EXCEPTION) {
            const x = new Thrift.TApplicationException()
            x.read(input)
            input.readMessageEnd()
            return callback(x)
        }
        const result = new FinagleTestServiceCheckContextResult()
        result.read(input)
        input.readMessageEnd()

        if (null !== result.success) {
            return callback(null, result.success)
        }
        return callback("checkContext failed: unknown result")
    }
    
}

class FinagleTestServiceProcessor {
    private _handler

    constructor(handler) {
        this._handler = handler
    }

    public process(input, output) {
        const r = input.readMessageBegin()
        if (this["process_" + r.fname]) {
            return this["process_" + r.fname].call(this, r.rseqid, input, output)
        } else {
            input.skip(Thrift.Type.STRUCT)
            input.readMessageEnd()
            const err = `Unknown function ${r.fname}`
            const x = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN_METHOD, err)
            output.writeMessageBegin(r.fname, Thrift.MessageType.EXCEPTION, r.rseqid)
            x.write(output)
            output.writeMessageEnd()
            output.flush()
        }
    }

    public process_willSucceed(seqid, input, output) {
        const args = new FinagleTestServiceWillSucceedArgs()
        args.read(input)
        input.readMessageEnd()
        if (this._handler.willSucceed.length === 1) {
            Q.fcall(this._handler.willSucceed, args.req).then((data) => {
                const result = new FinagleTestServiceWillSucceedResult({success: data})
                output.writeMessageBegin("willSucceed", Thrift.MessageType.REPLY, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            }, (err) => {
                const result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                output.writeMessageBegin("willSucceed", Thrift.MessageType.EXCEPTION, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        } else {
            this._handler.willSucceed(args.req, (err, data) => {
                let result
                if (err == null) {
                    result = new FinagleTestServiceWillSucceedResult((err != null ? err : {success: data}))
                    output.writeMessageBegin("", Thrift.MessageType.REPLY, seqid)
                } else {
                    result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                    output.writeMessageBegin("", Thrift.MessageType.EXCEPTION, seqid)
                }
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        }
    }
    public process_idlException(seqid, input, output) {
        const args = new FinagleTestServiceIdlExceptionArgs()
        args.read(input)
        input.readMessageEnd()
        if (this._handler.idlException.length === 1) {
            Q.fcall(this._handler.idlException, args.req).then((data) => {
                const result = new FinagleTestServiceIdlExceptionResult({success: data})
                output.writeMessageBegin("idlException", Thrift.MessageType.REPLY, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            }, (err) => {
                const result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                output.writeMessageBegin("idlException", Thrift.MessageType.EXCEPTION, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        } else {
            this._handler.idlException(args.req, (err, data) => {
                let result
                if (err == null) {
                    result = new FinagleTestServiceIdlExceptionResult((err != null ? err : {success: data}))
                    output.writeMessageBegin("", Thrift.MessageType.REPLY, seqid)
                } else {
                    result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                    output.writeMessageBegin("", Thrift.MessageType.EXCEPTION, seqid)
                }
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        }
    }
    public process_authException(seqid, input, output) {
        const args = new FinagleTestServiceAuthExceptionArgs()
        args.read(input)
        input.readMessageEnd()
        if (this._handler.authException.length === 1) {
            Q.fcall(this._handler.authException, args.req).then((data) => {
                const result = new FinagleTestServiceAuthExceptionResult({success: data})
                output.writeMessageBegin("authException", Thrift.MessageType.REPLY, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            }, (err) => {
                const result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                output.writeMessageBegin("authException", Thrift.MessageType.EXCEPTION, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        } else {
            this._handler.authException(args.req, (err, data) => {
                let result
                if (err == null) {
                    result = new FinagleTestServiceAuthExceptionResult((err != null ? err : {success: data}))
                    output.writeMessageBegin("", Thrift.MessageType.REPLY, seqid)
                } else {
                    result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                    output.writeMessageBegin("", Thrift.MessageType.EXCEPTION, seqid)
                }
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        }
    }
    public process_otherException(seqid, input, output) {
        const args = new FinagleTestServiceOtherExceptionArgs()
        args.read(input)
        input.readMessageEnd()
        if (this._handler.otherException.length === 1) {
            Q.fcall(this._handler.otherException, args.req).then((data) => {
                const result = new FinagleTestServiceOtherExceptionResult({success: data})
                output.writeMessageBegin("otherException", Thrift.MessageType.REPLY, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            }, (err) => {
                const result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                output.writeMessageBegin("otherException", Thrift.MessageType.EXCEPTION, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        } else {
            this._handler.otherException(args.req, (err, data) => {
                let result
                if (err == null) {
                    result = new FinagleTestServiceOtherExceptionResult((err != null ? err : {success: data}))
                    output.writeMessageBegin("", Thrift.MessageType.REPLY, seqid)
                } else {
                    result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                    output.writeMessageBegin("", Thrift.MessageType.EXCEPTION, seqid)
                }
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        }
    }
    public process_checkContext(seqid, input, output) {
        const args = new FinagleTestServiceCheckContextArgs()
        args.read(input)
        input.readMessageEnd()
        if (this._handler.checkContext.length === 0) {
            Q.fcall(this._handler.checkContext).then((data) => {
                const result = new FinagleTestServiceCheckContextResult({success: data})
                output.writeMessageBegin("checkContext", Thrift.MessageType.REPLY, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            }, (err) => {
                const result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                output.writeMessageBegin("checkContext", Thrift.MessageType.EXCEPTION, seqid)
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        } else {
            this._handler.checkContext((err, data) => {
                let result
                if (err == null) {
                    result = new FinagleTestServiceCheckContextResult((err != null ? err : {success: data}))
                    output.writeMessageBegin("", Thrift.MessageType.REPLY, seqid)
                } else {
                    result = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN, err.message)
                    output.writeMessageBegin("", Thrift.MessageType.EXCEPTION, seqid)
                }
                result.write(output)
                output.writeMessageEnd()
                output.flush()
            })
        }
    }
    
}

export { FinagleTestServiceProcessor as Processor }
export { FinagleTestServiceClient as Client }