{{#docstring}}
{{docstring}}
{{/docstring}}
{{#importDoc}}
{{>importDoc}}

import thrift from 'thrift'
import {Q, Thrift, Protocol} from 'thrift'

{{requireStatements}}
{{/importDoc}}

export interface I{{StructName}}Args {
{{#fields}}
    {{fieldName}}{{#optional}}?{{/optional}}: {{fieldType}}
{{/fields}}
}

export class {{StructName}} {
{{#fakeFields}}
    public {{fieldName}}: {{fieldType}}
{{/fakeFields}}
{{#fields}}
    public {{fieldName}}: {{fieldType}}
{{/fields}}
    constructor(args?: I{{StructName}}Args) {
        if (args) {
{{#fields}}
            if (args.{{fieldName}} !== undefined && args.{{fieldName}} !== null) {
                this.{{fieldName}} = args.{{fieldName}}
            }{{^optional}} else {
                throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field {{fieldName}} is unset!')
            }{{/optional}}
{{/fields}}
        }
    }

    public read(input: Protocol): void {
        input.readStructBegin()
        while (true) {
            const {fname, ftype, fid} = input.readFieldBegin()
            if (ftype === Thrift.Type.STOP) {
                break
            }
            switch (fid) {
{{#fields}}
                case {{id}}:
                    {{>readField}}
                    break
{{/fields}}
                default:
                    input.skip(ftype)
            }
            input.readFieldEnd()
        }
        input.readStructEnd()
        return
    }

    public write(output: Protocol): void {
        output.writeStructBegin("{{StructName}}")
{{#fields}}
        if (this.{{fieldName}} !== null && this.{{fieldName}} !== undefined) {
            {{>writeField}}
        }
{{/fields}}
        output.writeFieldStop()
        output.writeStructEnd()
        return
    }
}
